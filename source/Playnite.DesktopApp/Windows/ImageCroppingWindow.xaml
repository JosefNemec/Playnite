<controls:WindowBase x:Class="Playnite.DesktopApp.Windows.ImageCroppingWindow"
                     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                     xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                     xmlns:controls="clr-namespace:Playnite.Controls;assembly=Playnite"
                     xmlns:pcon="clr-namespace:Playnite.Converters;assembly=Playnite"
                     mc:Ignorable="d"
                     d:DesignStyle="{StaticResource WindowDesignStyle}"
                     Style="{DynamicResource StandardWindowStyle}"
                     Title="{Binding WindowTitle}" Height="900" Width="700"
                     ShowInTaskbar="False" WindowStartupLocation="CenterOwner"
                     AutomationProperties.AutomationId="WindowImageCropping">
    <Grid Margin="0,4,0,0">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Image Visibility="Collapsed" x:Name="CroppedImage" Source="{Binding CroppedResultImage, Mode=OneWayToSource}"></Image>

        <Grid Grid.Row="0" x:Name="FrameLayer" MouseLeftButtonDown="FrameLayer_OnMouseLeftButtonDown" MouseMove="FrameLayer_OnMouseMove" MouseLeftButtonUp="FrameLayer_OnMouseLeftButtonUp">
            <Image x:Name="Image" Source="{Binding ImageSource}"/>
            <Canvas x:Name="SelectionBox">
                <Rectangle x:Name="Rect" Stroke="DarkRed" Visibility="Collapsed" Fill="#77FFFFFF"/>
            </Canvas>
        </Grid>

        <DockPanel LastChildFill="False" Grid.Column="0" Grid.Row="1" Margin="5,0,5,5">
            <Button Name="ButtonCancel" Content="{DynamicResource LOCCancelLabel}" DockPanel.Dock="Right" IsCancel="True"
                    Style="{StaticResource BottomButton}"
                    Command="{Binding CloseCommand}"/>
            <Button Name="ButtonOK" Content="{DynamicResource LOCSelect}" DockPanel.Dock="Right"
                    Style="{StaticResource BottomButton}"
                    Command="{Binding ConfirmCommand}"/>
        </DockPanel>
    </Grid>
</controls:WindowBase>
